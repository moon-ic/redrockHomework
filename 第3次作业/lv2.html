<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>redRock Homeworklv2</title>
    <script type="text/javascript">
        // 1.普通递归实现
        let a = [1, [2, [3, 4, 5]]];
        function flatten(arr) {
            let result = [];
            // 初始化为数组
            for (let i = 0; i < arr.length; i++) {
                // 当前元素是一个数组，对其进行递归展平
                if (Array.isArray(arr[i])) {
                    // 递归展平结果拼接到结果数组
                    result = result.concat(flatten(arr[i]));
                }
                // 否则直接加入结果数组
                else {
                    result.push(arr[i]);
                }
            }
            return result;
        }
        console.log(flatten(a));

        // 2.reduce实现
        let arr2 = [1, [2, [3, 4]]];
        function flatten(arr) {
            return arr.reduce(function (pre, cur) {
                return pre.concat(Array.isArray(cur) ? flatten(cur) : cur)
            }, [])
        }
        console.log(flatten(arr2));//  [1, 2, 3, 4，5]

        // 3.split+tostring实现
        let arr3 = [1, [2, [3, 4]]];
        function flatten(arr) {
            return arr.toString().split(',').map(i => Number(i));
        }
        console.log(flatten(arr3)); //  [1, 2, 3, 4]

        // 4.正则+json实现
        let arr4 = [1, [2, [3, [4, 5]]], 6];
        function flatten(arr) {
            let str = JSON.stringify(arr);
            str = str.replace(/(\[|\])/g, '');
            // 拼接最外层，变成JSON能解析的格式
            str = '[' + str + ']';
            return JSON.parse(str);
        }
        console.log(flatten(arr4)); //  [1, 2, 3, 4，5]
    </script>
</head>

<body>

</body>

</html>